<!DOCTYPE html>
<html>
<head>
    <title>Kirim dan Verifikasi OTP</title>
</head>
<body>

    <h1>Kirim dan Verifikasi OTP via WhatsApp</h1>
    <p>Masukkan nomor WhatsApp dan klik tombol untuk mengirim pesan OTP.</p>

    <label for="nomorHp">Nomor WhatsApp:</label><br>
    <input type="text" id="nomorHp" name="nomorHp" value="6289525036410"><br><br>

    <label for="kodeOtp">Kode OTP:</label><br>
    <input type="text" id="kodeOtp" name="kodeOtp"><br><br>

    <button onclick="kirimPesan()">Kirim OTP</button>
    <button onclick="verifikasiOtp()">Verifikasi OTP</button>

    <script>
        // Fungsi untuk mengirim pesan WhatsApp dengan OTP
        function kirimPesan() {
            // Mengambil nilai dari kolom input nomorHp
            const nomorTujuan = document.getElementById("nomorHp").value;

            const myHeaders = new Headers();
            myHeaders.append("Authorization", "App 93f851988bfadec55cc36e053815602b-43f554c3-af5e-45e2-9936-62328e8daed3");
            myHeaders.append("Content-Type", "application/json");
            myHeaders.append("Accept", "application/json");

            const raw = JSON.stringify({
                "messages": [
                    {
                        "from": "447860088970",
                        // Menggunakan nomor yang dimasukkan pengguna
                        "to": nomorTujuan, 
                        "messageId": "833c2d7e-dec3-41e4-a745-7d1de0d5dda8",
                        "content": {
                            "templateName": "test_whatsapp_template_en",
                            "templateData": {
                                "body": {
                                    "placeholders": ["csrobuxnow"]
                                }
                            },
                            "language": "en"
                        }
                    }
                ]
            });

            const requestOptions = {
                method: "POST",
                headers: myHeaders,
                body: raw,
                redirect: "follow"
            };

            fetch("https://nm3kn5.api.infobip.com/whatsapp/1/message/template", requestOptions)
                .then((response) => response.text())
                .then((result) => console.log(result))
                .catch((error) => console.error(error));
        }

        // Fungsi ini akan kamu isi nanti untuk memverifikasi OTP
        function verifikasiOtp() {
            const kodeYangDimasukkan = document.getElementById("kodeOtp").value;
            // Di sini kamu bisa tambahkan kode untuk membandingkan kode yang dimasukkan
            // dengan kode yang dikirim ke nomor HP.
            console.log("Kode OTP yang dimasukkan: " + kodeYangDimasukkan);
            // ... (lanjutkan dengan logika verifikasi di sini)
        }
    </script>

</body>
</html>
